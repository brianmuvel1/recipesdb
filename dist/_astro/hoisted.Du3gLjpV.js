import"./Layout.astro_astro_type_script_index_0_lang.BzHAMJTp.js";function l(e,t,s){e&&(e.textContent=s,e.className=`mt-4 p-4 rounded-md ${t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,e.classList.remove("hidden"))}function o(e,t){const s=e.querySelector("[data-submit-button]"),n=e.querySelector("[data-button-text]"),r=e.querySelector("[data-loading-spinner]");s&&n&&r&&(s.setAttribute("disabled",t.toString()),n.textContent=t?"Scraping...":`Scrape Recipe${e.id.includes("multiple")?"s":""}`,r.classList.toggle("hidden",!t))}async function a(e){e.preventDefault();const t=e.target,s=t.id.includes("multiple")?"multiple":"single",n=document.getElementById(`${s}RecipeResult`),r=t.querySelector('input[type="url"]').value;o(t,!0);try{const c=await fetch("/api/scrape",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r,type:s})}),i=await c.json();if(c.ok){const u=s==="multiple"?`Successfully scraped ${i.count} recipes!`:"Recipe successfully scraped and saved!";l(n,!0,u),t.reset()}else l(n,!1,i.message||`Failed to scrape recipe${s==="multiple"?"s":""}`)}catch{l(n,!1,`An error occurred while scraping the recipe${s==="multiple"?"s":""}`)}finally{o(t,!1)}}document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",a)});
